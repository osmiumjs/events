(()=>{var t={671:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(839),e),i(n(159),e),i(n(685),e);const s=n(839),a=n(159),o=n(685);e.default={...s,...a,...o}},159:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateChunk=e.iterateParallelLimit=e.iterateParallel=e.iterateKeys=e.iterate=void 0;const r=n(839);function i(t,e,n,s){let a=!1,o=0;function c(t,e){const n={break:()=>a=!0,accKeyName:t,key:t=>n.accKeyName=t,shift:(t=0)=>o=t,repeat:()=>o=-1,skip:()=>o=1,length:e};return n}let u=async(t,n,r)=>{let i=c(n,r);p(await e(t,n,i),i)},l=(t,n,r)=>{let i=c(n,r);p(e(t,n,i),i)},f=r.isObject(n)||r.isArray(n)||r.isString(n)||r.isInteger(n)?n:!1!==n&&t,p=(t,e)=>{r.isUndefined(t)||(r.isObject(n)&&(f[e.accKeyName]=s?Object.assign(f[e.accKeyName]||{},t):t),r.isArray(n)&&f.push(t),r.isString(n)&&(f+=t?r.isFunction(t.toString)?t.toString():t+"":""),r.isInteger(n)&&(f+=r.isInteger(t)?t:parseInt(t)),!1===n&&(f=f||t))};return r.isAsyncFunction(e)?new Promise((async(e,n)=>{try{if(r.isArray(t)){for(let e=0;e<t.length&&!a;++e)o&&(e+=o,o=0),await u(t[e],e,t.length);e(f)}if(r.isObject(t)){const n=Object.keys(t);await i(n,(async(e,r,i)=>{a&&i.break(),await u(t[e],e,n.length),o&&(i.shift(o),o=0)})),e(f)}if(r.isInteger(t)){for(let e=0;e<t&&!a;++e)o&&(e+=o,o=0),await u(e,e,t);e(f)}}catch(t){n(t)}e(!1)})):(()=>{if(r.isArray(t)){for(let e=0;e<t.length&&!a;++e)o&&(e+=o,o=0),l(t[e],e,t.length);return f}if(r.isObject(t)){const e=Object.keys(t);return i(e,((n,r,i)=>{a&&i.break(),l(t[n],n,e.length),o&&(i.shift(o),o=0)})),f}if(r.isInteger(t)){for(let e=0;e<t&&!a;++e)o&&(e+=o,o=0),l(e,e,t);return f}return!1})()}e.iterate=i,e.iterateKeys=function(t,e,n,s){return r.isAsyncFunction(e)?(async()=>i(t,(async(t,n,r)=>e(n,t,r)),n,s))():i(t,((t,n,r)=>e(n,t,r)),n,s)},e.iterateParallel=async function(t,e){return Promise.all(i(t,((t,n,r)=>{(async()=>{e(t,n,r)})()}),[]))},e.iterateParallelLimit=async function(t,e,n){let s=0,a=0;return r.isArray(e)&&(s=e.length),r.isObject(e)&&(s=Object.keys(e).length),0===s?[]:i(Math.ceil(s/t),(async o=>{let c=i(t,((i,c,u)=>{if(a>=s)return u.break();a++;const l=o*t+c,f=r.isObject(e)?Object.keys(e)[l]:l,p=e[f];return(async()=>n(p,f,u))()}),[]);return Promise.all(c)}),[])},e.iterateChunk=async function(t,e,n){let s=[],a=[],o={},c=0,u=0;(r.isArray(e)||r.isObject(e))&&await i(e,(async(i,l,f)=>{if(c++,u++,r.isArray(e)){if(s.push(i),a.push(l),c<t&&f.length!==u)return;return await n(s,a,f),c=0,s=[],void(a=[])}o[`${l}`]=i,c<t&&f.length!==u||(await n(o,f),c=0,o={})}))}},685:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delay=e.escapeRegExp=e.setDefaults=e.nop$=e.nop=e.toArray=e.objectToArray=e.arrayToObject=e.UID=e.GUID=e.random=void 0;const r=n(159),i=n(839);let s=!1;function a(){return s?Object.keys(s||{}).length?s.randomInt(0,32**8)/1099511627776:Math.random():window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296}new Function("try {return this===global;}catch(e){return false;}")&&(s=n(756)),e.random=a,e.GUID=function(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"){return t.replace(/[xy]/g,(t=>{let e=16*a()|0;return("x"===t?e:3&e|8).toString(16)}))},e.UID=function(t="",e="xxxxxxxxxxxxxxxxxx-xxxxxx"){return`${t}${e}`.replace(/[x]/g,(()=>(36*a()|0).toString(36)[a()>=.5?"toUpperCase":"toLowerCase"]()))},e.arrayToObject=function(t,e){return r.iterate(t,((t,n,r)=>e?((i.isInteger(t)||i.isString(t))&&r.key(n+1),t):(r.key(t),n+1)),{})},e.objectToArray=function(t,e){return r.iterate(t,((t,n)=>e?n:t),[])},e.toArray=function(t){return i.isArray(t)?t:[t]},e.nop=function(){},e.nop$=async function(){return new Promise((t=>t()))},e.setDefaults=function(t,e,n){return i.isUndefined(t[e])&&(t[e]=n),t},e.escapeRegExp=function(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},e.delay=async function(t){return new Promise((e=>setTimeout(e,t||100)))}},839:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.asyncFunctionPattern=e.isObject=e.isUndefined=e.isSymbol=e.isRegExp=e.isPositiveInteger=e.isNumber=e.isNull=e.isIterable=e.isNativeObject=e.isJSON=e.isInteger=e.isAsyncFunction=e.isGUIDv4=e.isGUID=e.isFunction=e.isFloat=e.isEmptyObject=e.isEmptyArray=e.isBoolean=e.isString=e.isArray=void 0;const n="$TvNd3G0XQ1gN";function r(t,e){return!a(e)&&!s(e)&&e.constructor&&e.constructor.name===t}function i(t,e=""){return!!t&&(r("AsyncFunction",t)||r("Function",t)&&(t.toString().indexOf(e.length>1?e:n)>0||t.toString().indexOf("return __awaiter(this")>0&&t.toString().indexOf("return __generator(this")>0))}function s(t){return"[object Null]"===Object.prototype.toString.call(t)}function a(t){return void 0===t}function o(t){return r("Array",t)}function c(t){return"[object Object]"==={}.toString.call(t)}function u(t){return r("String",t)}function l(t){return Number.isFinite(t)&&!isNaN(parseFloat(t))}function f(t){return Number.isSafeInteger(t)}e.asyncFunctionPattern=n,e.isAsyncFunction=i,e.isNull=s,e.isUndefined=a,e.isFunction=function(t){return r("Function",t)||i(t)},e.isArray=o,e.isEmptyArray=function(t){return o(t)&&0===t.length},e.isObject=c,e.isEmptyObject=function(t){return c(t)&&0===Object.keys(t).length},e.isNativeObject=function(t){return r("Object",t)},e.isString=u,e.isBoolean=function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},e.isNumber=l,e.isInteger=f,e.isFloat=function(t){return l(t)&&!f(t)},e.isPositiveInteger=function(t){return f(t)&&t>=0},e.isSymbol=function(t,e=!1){return"symbol"==typeof t&&(!e||t.description===e)},e.isIterable=function(t){return!!c(t)&&!!Object.keys(t).length||!!o(t)&&!!t.length},e.isJSON=function(t){if(!u(t))return!1;try{const e=JSON.parse(t);return!!e&&"object"==typeof e}catch(t){}return!1},e.isGUIDv4=function(t){return u(t)&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(t)},e.isGUID=function(t){return u(t)&&/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i.test(t)},e.isRegExp=function(t){return r("RegExp",t)||i(t)}},607:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.Events=e.EventInformation=void 0;const s=n(671);class a{cb;time;constructor(t,e){this.cb=t,this.time=e}}e.EventInformation=a;class o{eventIdPrefix="#";eventsList={};eventMappers=[];eventMappersAfter=[];middlewares=[];middlewaresAfter=[];defaultChain;UNDEFINED=Symbol("UNDEFINED");constructor(t=!1){this.defaultChain=t}getUID(){return s.UID(this.eventIdPrefix)}clear(){this.eventsList={}}reset(){this.middlewares=[],this.middlewaresAfter=[],this.eventMappers=[],this.eventMappersAfter=[],this.clear()}off(t,e=!1){const n={};return s.iterate(s.toArray(t),(t=>{if(this.eventsList[t])return n[t]=Object.keys(this.eventsList[t]),void delete this.eventsList[t];if(e)return void(n[t]=!1);let r=t.slice(0,-1*this.getUID().length);this.eventsList[r]?(n[r]=n[r]||[],n[r].push(t),delete this.eventsList[r][t]):n[r]=!1})),n}offEvent(t){return this.off(t,!0)}useFirst(t){return this.middlewares.unshift(t)}use(t){return this.middlewares.push(t)}unUse(t){this.middlewares.splice(t-1,1)}useAfterFirst(t){return this.middlewaresAfter.unshift(t)}useAfter(t){return this.middlewaresAfter.push(t)}unUseAfter(t){this.middlewaresAfter.splice(t-1,1)}getEventsList(){return Object.keys(this.eventsList)}getEvents(t){return s.iterate(this.eventsList,((e,n)=>n.match(new RegExp(`^${t}$`,"gi"))?n:void 0),[])}mapEvents(t,e=!1){return this.eventMappers.push({list:e,target:t})}unmapEvents(t){this.eventMappers.splice(t-1,1)}mapEventsAfter(t,e=!1){return this.eventMappersAfter.push({list:e,target:t})}unmapEventsAfter(t){this.eventMappersAfter.splice(t-1,1)}exists(t,e=!1){let n=!1;if(e&&(s.iterate(this.eventMappers.concat(this.eventMappersAfter),(e=>{e.target.exists(t)&&(n=!0)})),n))return n;if(s.isRegExp(t)){let e=!1;return s.iterate(this.getEventsList(),(n=>{e=e||!!n.match(t)})),e}return!!this.eventsList[t]}on(t,e){const n=(t,e)=>{let n=`${t}${this.getUID()}`;return this.eventsList[t]=this.eventsList[t]||{},this.eventsList[t][n]=new a(e,Date.now()),n};return s.isObject(t)?s.iterate(t,((t,e)=>n(e,t)),[]):!!s.isFunction(e)&&n(t,e)}once(t,e){const n=(t,e)=>{let n=this.on(t,(async(...t)=>(this.off(n),e(...t))));return n};return s.isObject(t)?s.iterate(t,((t,e)=>n(e,t)),[]):!!s.isFunction(e)&&n(t,e)}wait(t,e=!1){return new Promise((n=>this.once(t,(async(...t)=>{const r=await(e||s.nop$)(...t);return n(t),r}))))}async emitEx(t,e,n,...r){let i,a=[],o={};const c=n||{};c.context=c.context||this;const u=e=>s.iterate(e,(e=>{s.isFunction(e.target.emit)&&(!1===e.list||s.arrayToObject(e.list)[t])&&a.push(e.target.emitEx(t,!1,{context:c.context,preCall:c.preCall,fromMapper:!0},...r))})),l=async e=>{await s.iterate(e,(async e=>{s.isFunction(e.target.emit)&&(!1===e.list||s.arrayToObject(e.list)[t])&&Object.assign(o,await e.target.emitEx(t,!0,{context:c.context,preCall:c.preCall,fromMapper:!0},...r))}))};return Object.assign(c,{ignore:!1,ignoreFalse:!1,dontExit:!1}),c.ignore||await s.iterate(this.middlewares,(async e=>{if(!s.isFunction(e))return;const n=await e.apply(c.context,[t,c,...r]);s.isArray(n)&&(r=n),s.isObject(n)&&(i=n)})),i&&!c.dontExit?i.ret:(await(e?l:u)(this.eventMappers),e?await s.iterate(this.eventsList[t],(async(t,e,n)=>{n.key(e),s.isFunction(c.preCall)&&"function"==typeof c.preCall&&(r=await c.preCall(t.cb,r,e,c,this));const i=await t.cb.apply(c.context,r);return s.isUndefined(i)?this.UNDEFINED:i}),o):(await s.iterate(this.eventsList[t],(async(t,e)=>(c.preCall&&s.isFunction(c.preCall)&&(r=await c.preCall(t.cb,r,e,c,this)),a.push(t.cb.apply(c.context,r))))),o=await Promise.all(a),a=[]),e?await l(this.eventMappersAfter):u(this.eventMappersAfter),e||(o=o.concat(await Promise.all(a))),await s.iterate(this.middlewaresAfter,(async e=>{const n=await e.apply(c.context,[t,c,o,...r]);s.isUndefined(n)||(o=n)})),o)}async emit(t,...e){return this.defaultChain?this.emitChain(t,...e):this.emitParallel(t,...e)}async emitParallel(t,...e){return this.emitEx(t,!1,!1,...e)}async emitChain(t,...e){return this.emitEx(t,!0,!1,...e)}}e.Events=o,i(n(699),e),e.default={Events:o}},699:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},756:()=>{}},e={},n=function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}(607),r=exports;for(var i in n)r[i]=n[i];n.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();